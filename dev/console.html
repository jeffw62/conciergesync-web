<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8" />

  <!-- üîî ConciergeSync‚Ñ¢ Icons -->
  <link rel="icon" type="image/png" sizes="16x16" href="/dev/asset/icons/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/dev/asset/icons/favicon-32x32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/dev/asset/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/dev/asset/icons/android-chrome-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/dev/asset/icons/android-chrome-512x512.png">
  <link rel="shortcut icon" href="/dev/asset/icons/favicon.ico">
  <link rel="manifest" href="manifest.json">
  <link rel="preload" href="/dev/asset/icons/favicon-32x32.png" as="image" type="image/png">

  <meta name="theme-color" content="#0d1b2a">
  <meta name="application-name" content="ConciergeSync‚Ñ¢ Web Console">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="ConciergeSync">

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ConciergeSync‚Ñ¢ Console</title>
  <!-- Font Awesome 6 (for icons like user-circle, wallet, etc.) -->
  <!-- Font Awesome 6.4 via jsDelivr (no integrity hash) -->
<link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"
  crossorigin="anonymous" />
  
  <link rel="stylesheet" href="/dev/style.css" />
  
  <<!-- === Console Chrome === -->
  <link rel="stylesheet" href="/dev/css/console.css?_t=1" />
  
  <!-- === Horizon / Wallet === -->
  <link rel="stylesheet" href="/dev/css/wallet-con.css">
  <link rel="stylesheet" href="/dev/css/wallet-ui.css">
  
  <!-- === Discovery === -->
  <link rel="stylesheet" href="/dev/css/redem-con.css">

</head>
<body>
  <div id="walletRoot">
  <!-- Header -->
  <header>
    <div class="logo">
      <img src="/dev/asset/CS_Logo_v1.svg" alt="ConciergeSync Logo" class="site-logo" />
      <span>ConciergeSync‚Ñ¢</span>
    </div>
    <div class="menu-toggle">
      <span></span><span></span><span></span>
    </div>
    
    <nav class="console-nav">
      <div class="header-ticker">
        <span class="label">Avg Cost per Mile:</span>
        <span id="tickerValue">2.13¬¢</span>
        <span id="tickerTrend" class="up">‚ñ≤</span>
      </div>
        <!-- Account / profile dropdown -->
        <div class="account-menu">
           <button id="accountBtn" class="profile-btn">
              <i class="fa-solid fa-user"></i>
           </button>
          <div class="account-dropdown">
            <a href="#">Settings</a>
            <a href="#">Notifications</a>
            <a href="#">Profile</a>
            <a href="#">Contact</a>
            <a href="#">Log Out</a>
          </div>
        </div>
    </nav>
      <!-- Placeholder for Hamburger Menu (Phase 3) -->
      <div class="nav-toggle" id="navToggle">
        <i class="fas fa-bars"></i>
      </div>
  </header>
    
    <!-- üß≠ Slide-in Navigation Drawer -->
    <nav id="sideNav" class="side-nav">
      <div class="nav-header">
        <h2>Navigation</h2>
        <button id="closeNav" aria-label="Close Menu">&times;</button>
      </div>
      <ul>
        <li><a href="#" data-page="cons-con">Console</a></li>
        <li><a href="#" data-page="wallet-con">Horizon</a></li>
        <li><a href="#" data-page="redem-con">Discovery</a></li>
        <li><a href="#" data-page="prog-con">Loyalty</a></li>
        <li><a href="#" data-page="bonus-con">Opportunities</a></li>
        <li><a href="#" data-page="hints-con">Insights</a></li>
        <!--<li><a href="#">Future</a></li>
        <li><a href="#">Future</a></li>-->
      </ul>
    </nav>
    
  <!-- Main workspace container -->
  <main id="workspace">

    <!-- üü° Console-owned, persistent -->
    <div class="workspace-header">
      <div class="page-title-slot"></div>
    </div>
  
    <!-- üîÅ Page-owned, replaceable -->
    <div id="workspace-body"></div>
    
  <!-- ‚úÖ Dashboard Drop-In -->
  <div class="dashboard-container">

    <!-- üü° Greeting -->
    <section class="dashboard-greeting fade-in">
      <h1>Good evening, Jeff.</h1>
      <p>Welcome to your ConciergeSync‚Ñ¢ Console ‚Äî your travel finances, unified in one glance.</p>
    </section>

    <!-- üíº Portfolio Summary -->
    <section class="dashboard-summary">
      <div class="summary-card">
        <div>
          <h3>Total Portfolio Value</h3>
          <p>$23,914</p>
        </div>
        <div>
          <h3>Total Points & Miles</h3>
          <p>1.82 M</p>
        </div>
        <div>
          <h3>Average CPM</h3>
          <p>2.07¬¢ <span class="trend down">‚ñº</span></p>
        </div>
      </div>
    </section>

    <!-- ‚ú® Concierge Recommendation -->
    <section class="dashboard-recommendation">
      <h2>Concierge Recommendation</h2>
      <p>You could redeem <strong>150,000 UR</strong> for <strong>Singapore Airlines Business Class</strong> 
         at <strong>2.8¬¢ per mile</strong> ‚Äî an outstanding value worth <strong>$4,200</strong>.
      </p>
    </section>

    <!-- üß≠ Creed -->
    <section class="dashboard-creed">
      <h3>ConciergeSync‚Ñ¢ Creed‚Ä¶</h3>
      <p>Clarity eliminates confusion. Cleanliness eliminates clutter.
        <strong>Trust is our foundation.</strong>
      </p>
    </section>
  </div>
</main>

  <!-- Footer Injection -->
  <div id="footer"></div>

<!-- üîπ Synthetic Codes MUST load BEFORE console-core -->
<script src="/dev/js/syntheticCodes.js?v=2025.11.06"></script>
    
<!-- üîπ Unified Console Logic -->
<script src="/dev/js/console-core.js?v=2025.11.06"></script>
    
<script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker
        .register("/dev/service-worker.js")
        .then(reg => {
          console.log("ü™Ñ ConciergeSync‚Ñ¢ service worker registered.");
    
          // üí° Check for updates automatically
          if (reg.waiting) {
            reg.waiting.postMessage("SKIP_WAITING");
          }
    
          reg.addEventListener("updatefound", () => {
            const newWorker = reg.installing;
            if (newWorker) {
              newWorker.addEventListener("statechange", () => {
                if (newWorker.state === "installed" && navigator.serviceWorker.controller) {
                  newWorker.postMessage("SKIP_WAITING");
                }
              });
            }
          });
        })
        .catch(err => console.warn("Service Worker registration failed:", err));
    }
  </script>

  <script>
    
  /* =========================================================
     CONSOLE ROUTER (SINGLE SOURCE OF TRUTH)
     ========================================================= */
  
  (function () {
    "use strict";
  
    const workspace = document.getElementById("workspace");
  
    if (!workspace) {
      console.error("‚ùå Router: #workspace not found");
      return;
    }
  
    window.loadPage = async function loadPage(pageId) {
      console.log("üì¶ loadPage ‚Üí", pageId);
  
      const url = `/dev/${pageId}.html`;
  
      try {
        const res = await fetch(url, { cache: "no-store" });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
  
        const html = await res.text();
        const temp = document.createElement("div");
        temp.innerHTML = html;
        
        // PAGE TITLE EXTRACTION (console-owned)
        const titleSlot = document.querySelector(".page-title-slot");
        const pageTitle = temp.querySelector("[data-page-title]");
        
        if (titleSlot && pageTitle) {
          titleSlot.innerHTML = "";
          titleSlot.appendChild(pageTitle);
          console.log("üü° Page title injected into slot");
        } else {
          if (!titleSlot) console.warn("‚ö†Ô∏è .page-title-slot not found");
          if (!pageTitle) console.warn("‚ö†Ô∏è data-page-title not found in page");
        }
        
        // INJECT CLEANED PAGE CONTENT
        const body = document.getElementById("workspace-body");
        if (!body) {
          console.error("‚ùå Router: #workspace-body not found");
          return;
        }
        body.innerHTML = temp.innerHTML;
  
        document.dispatchEvent(
          new CustomEvent("workspace:ready", {
            detail: { page: pageId, workspace }
          })
        );
  
        console.log("‚úÖ Workspace ready ‚Üí", pageId);
      } catch (err) {
        console.error("‚ùå loadPage failed:", pageId, err);
      }
    };
  })();
  </script>

</body>
</html>
